---
title: 'Electron에서 MQTT로 IoT 제어하기: AWS IoT Core 연동 가이드'
date: '2025-03-06'
updatedDate: ''
image: ''
excerpt: ''
tag: 'AWS'
---

### **개요**

오늘은 Electron.js 의 메인 프로세스에서 AWS IoT Core 를 연동하고, Mqtt 프로토콜을 활용하는 방식에 대해서 알아보고자 한다.


### **계기**
어쩌다 무인 키오스크 프로그램을 개발하게 되었는데, 이 때 기기와 서버간 실시간 통신을 위한 프로토콜을 결정해야 했음. 기존 프로젝트에서는 일반적인 rest api 방식으로 통신을 했는데, 라우터의 용량 등 비용적인 한계가 있어 비교적 경량화 되어 있고 IoT 기기 통신에 최적화 된 Mqtt 프로토콜을 사용하게 되었다. 

또 Aws 에서 제공하는 IoT Core 라는 서비스를 통해 기기 현황, 연결 상태 등을 체크할 수 있어서 여기서 제공하는 패키지를 사용해 개발을 하게 되었음.


### **Why MQTT?**
**MQTT란 무엇인가**

**Message Queueing Telemetry Transport** 의 약자로, 한 마디로 설명하면 통신 프로토콜이다. Http 같은..

경량화된 프로토콜로 메시지 크기가 작고 오버헤드가 적어 네트워크 대역폭을 최소화한다. 그래서 배터리 소모가 적어 저전력 IoT 기기에 적합하다. TCP/IP 를 기반으로 동작하기 때문에 항상 연결을 유지할 수 있고, 실시간 양방향 통신을 가능하게 한다. WebSocket 을 지원해서 브라우저에서도 활용할 수 있음. 

구독-발행 모델로 브로커를 통해서 메시지를 중개하는 방식인데, 우리는 뒤에서 살펴볼 AWS 의 IoT Core 서비스를 활용할 것이다.


### **Why AWS IoT Core??**



### **Electron과의 연동 시나리오**
Electron 메인 프로세스에서 IoT 디바이스처럼 동작하는 구조
무인 수거기와 AWS IoT Core 간의 데이터 흐름
기기 → AWS IoT Core (상태 전송)
AWS IoT Core → 기기 (제어 명령)
MQTT 메시지를 활용한 주요 시나리오 예시
"기기가 정상 동작 중인지 상태 체크"
"서버에서 특정 기기로 명령을 내려 제어"

### **AWS IoT Core 설정**
Thing 생성
보안 인증서 발급 및 정책 설정
MQTT 테스트 클라이언트에서 메시지 송수신 확인

### **Electron 에서 초기화**
AWS SDK 설치 및 환경 구성
MQTT 클라이언트 설정 (aws-iot-device-sdk-v2)
AWS IoT Core와의 연결 코드 구현

### **실제로 메시지를 주고받아 봅시다!**
메인 프로세스에서 Publish/Subscribe 구현
AWS IoT Core에서 수신한 메시지를 처리하는 방법
QoS 옵션을 활용한 신뢰성 있는 데이터 송수신
테스트 및 디버깅 (연결 상태 확인, 로그 분석 등)

### **Bonus, 렌더러 프로세스와의 통신!**
메인 프로세스에서 수신한 MQTT 메시지를 렌더러로 전달 (ipcMain, ipcRenderer)
UI에서 실시간 데이터 반영하기 (예: 기기의 현재 상태 표시)
렌더러에서 사용자 입력을 받아 MQTT로 서버에 명령 전송하기
